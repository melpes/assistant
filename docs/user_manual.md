# 개인 AI 비서 시스템 사용자 가이드

## 소개

개인 AI 비서 시스템은 캘린더 일정 관리, 금융 거래 관리, 웹 검색 등 다양한 개인 업무를 지원하는 AI 비서입니다. 자연어로 질문하면 시스템이 적절한 에이전트를 통해 작업을 처리하고 답변을 제공합니다.

이 가이드는 시스템의 주요 기능과 사용 방법을 설명합니다.

## 시스템 구성

### 멀티 에이전트 아키텍처

시스템은 다음과 같은 전문 에이전트들로 구성됩니다:

- **일반 에이전트**: 캘린더 관리, 웹 검색, 일반적인 질의응답
- **금융 에이전트**: 금융 거래 데이터 조회, 분석, 관리
- **슈퍼바이저 에이전트**: 사용자 쿼리를 적절한 전문 에이전트로 라우팅

### 스펙 기반 개발

시스템의 모든 기능은 `.kiro/specs/` 디렉토리의 스펙 문서를 통해 체계적으로 관리됩니다. 각 기능의 요구사항, 설계, 구현 상태를 추적할 수 있습니다.

## 주요 기능

### 1. 캘린더 관리

구글 캘린더와 연동하여 일정을 조회, 생성, 수정, 삭제할 수 있습니다.

**예시 질문:**
- "오늘 일정 알려줘"
- "내일 오후 2시에 회의 일정 추가해줘"
- "이번 주 일정 요약해줘"
- "다음 주 월요일 일정 있어?"

### 2. 금융 거래 관리

개인 금융 데이터를 관리하고 분석하는 기능을 제공합니다.

## 시작하기

### 시스템 요구사항

- Python 3.10 이상
- 필요한 패키지: `google-generativeai`, `pandas`, `sqlite3` 등

### 설치 방법

1. 저장소를 클론합니다.
2. 필요한 패키지를 설치합니다.

```bash
pip install -r requirements.txt
```

3. `src/config.py` 파일에 API 키를 설정합니다.
4. `query.txt` 파일에 질문을 작성합니다.
5. `main.py`를 실행합니다.

```bash
python main.py
```

## 주요 기능

### 1. 거래 조회 및 필터링

자연어로 특정 조건에 맞는 거래 내역을 조회할 수 있습니다.

**예시 질문:**
- "지난달 지출 내역을 보여줘"
- "식비 카테고리에서 만원 이상 쓴 내역 알려줘"
- "이번 달 신용카드로 결제한 내역만 보여줘"
- "지난 3개월 동안의 수입 내역을 알려줘"

### 2. 지출 분석 및 리포트

지출 패턴, 카테고리별 지출 비율, 기간별 비교 등의 분석 정보를 요청할 수 있습니다.

**예시 질문:**
- "이번 달 지출을 카테고리별로 분석해줘"
- "지난달과 이번 달 지출을 비교해줘"
- "올해 지출 트렌드를 보여줘"
- "식비 지출이 가장 많은 달은 언제야?"

### 3. 수입 분석 및 관리

수입 내역 조회, 수입원별 분석, 수입-지출 비교 등의 정보를 요청할 수 있습니다.

**예시 질문:**
- "올해 수입 내역을 월별로 보여줘"
- "수입원별로 수입을 분석해줘"
- "수입과 지출 비율을 분석해줘"
- "정기적인 수입 패턴을 분석해줘"

### 4. 수동 거래 입력

새로운 지출이나 수입 거래를 시스템에 추가할 수 있습니다.

**예시 질문:**
- "어제 식당에서 2만원 지출했어, 추가해줘"
- "오늘 프리랜서 수입으로 50만원 받았어, 기록해줘"
- "지난주 월요일에 마트에서 3만원 썼어, 식료품 카테고리로 추가해줘"

### 5. 데이터 관리 및 설정

분류 규칙 추가, 설정 변경, 데이터 백업 등의 관리 작업을 수행할 수 있습니다.

**예시 질문:**
- "편의점 지출은 모두 식비 카테고리로 분류하는 규칙 추가해줘"
- "데이터 백업해줘"
- "시스템 상태 확인해줘"
- "설정 보여줘"

## 상세 사용 가이드

### 거래 조회 및 필터링

#### 날짜 기반 조회

특정 날짜, 기간, 월, 년도 등을 기준으로 거래를 조회할 수 있습니다.

```
"어제 지출 내역 보여줘"
"지난주 거래 내역 알려줘"
"2025년 7월 지출 내역 보여줘"
"올해 1월부터 3월까지의 거래 내역 보여줘"
```

#### 카테고리 기반 조회

특정 카테고리의 거래만 조회할 수 있습니다.

```
"식비 카테고리 지출 내역 보여줘"
"교통비로 지출한 내역 알려줘"
"주거 관련 지출 내역 보여줘"
```

#### 금액 기반 조회

특정 금액 범위의 거래를 조회할 수 있습니다.

```
"만원 이상 지출한 내역 보여줘"
"5만원 이상 10만원 이하 지출 내역 알려줘"
"가장 금액이 큰 지출 5개 보여줘"
```

#### 결제 방식 기반 조회

특정 결제 방식의 거래만 조회할 수 있습니다.

```
"신용카드로 결제한 내역 보여줘"
"현금으로 지출한 내역 알려줘"
"체크카드 사용 내역 보여줘"
```

#### 복합 조건 조회

여러 조건을 조합하여 거래를 조회할 수 있습니다.

```
"지난달 식비 카테고리에서 만원 이상 지출한 내역 보여줘"
"이번 달 신용카드로 결제한 교통비 내역 알려줘"
"올해 가장 금액이 큰 수입 3개 보여줘"
```

### 지출 분석 및 리포트

#### 카테고리별 분석

지출을 카테고리별로 분석할 수 있습니다.

```
"이번 달 지출을 카테고리별로 분석해줘"
"올해 카테고리별 지출 비율 보여줘"
"지난 3개월 동안 어떤 카테고리에 가장 많이 썼어?"
```

#### 기간별 비교 분석

서로 다른 기간의 지출을 비교 분석할 수 있습니다.

```
"지난달과 이번 달 지출을 비교해줘"
"올해와 작년 같은 기간 지출 비교해줘"
"1분기와 2분기 지출 패턴 비교해줘"
```

#### 트렌드 분석

시간에 따른 지출 패턴을 분석할 수 있습니다.

```
"올해 지출 트렌드 보여줘"
"식비 지출 트렌드 분석해줘"
"최근 6개월 지출 패턴 분석해줘"
```

#### 특정 카테고리 상세 분석

특정 카테고리의 지출을 상세히 분석할 수 있습니다.

```
"식비 카테고리 상세 분석해줘"
"교통비 지출 패턴 분석해줘"
"여가 비용 분석해줘"
```

### 수입 분석 및 관리

#### 수입 내역 조회

특정 기간의 수입 내역을 조회할 수 있습니다.

```
"이번 달 수입 내역 보여줘"
"올해 수입 내역 월별로 보여줘"
"지난 분기 수입 내역 알려줘"
```

#### 수입원별 분석

수입을 수입원별로 분석할 수 있습니다.

```
"수입원별로 수입 분석해줘"
"어떤 수입원에서 가장 많은 수입이 발생했어?"
"부수입 비율이 어떻게 돼?"
```

#### 수입-지출 비교

수입과 지출을 비교 분석할 수 있습니다.

```
"수입 대비 지출 비율 알려줘"
"이번 달 순 현금 흐름 분석해줘"
"월별 수지 균형 보여줘"
```

#### 정기 수입 패턴 분석

반복되는 수입 패턴을 분석할 수 있습니다.

```
"정기적인 수입 패턴 분석해줘"
"월급 외 정기 수입 있어?"
"수입 안정성 분석해줘"
```

### 수동 거래 입력

#### 지출 거래 추가

새로운 지출 거래를 추가할 수 있습니다.

```
"어제 식당에서 2만원 지출했어, 추가해줘"
"지난주 토요일 영화관에서 15000원 썼어, 여가 카테고리로 추가해줘"
"오늘 마트에서 3만원 썼어, 신용카드로 결제했어"
```

#### 수입 거래 추가

새로운 수입 거래를 추가할 수 있습니다.

```
"오늘 프리랜서 수입으로 50만원 받았어, 기록해줘"
"어제 주식 배당금 10만원 들어왔어, 추가해줘"
"지난달 25일에 월급 300만원 받았어"
```

#### 거래 정보 업데이트

기존 거래 정보를 업데이트할 수 있습니다.

```
"어제 추가한 식당 지출 카테고리를 외식으로 변경해줘"
"지난주 영화관 지출 금액을 18000원으로 수정해줘"
"오늘 아침에 추가한 마트 지출 메모에 '주간 식료품' 추가해줘"
```

### 데이터 관리 및 설정

#### 분류 규칙 관리

거래 자동 분류를 위한 규칙을 관리할 수 있습니다.

```
"편의점 지출은 모두 식비 카테고리로 분류하는 규칙 추가해줘"
"스타벅스 지출은 카페 카테고리로 분류해줘"
"분류 규칙 목록 보여줘"
"우버 지출 규칙 삭제해줘"
```

#### 데이터 백업 및 복원

데이터를 백업하고 복원할 수 있습니다.

```
"데이터 백업해줘"
"백업 목록 보여줘"
"지난주 백업에서 데이터 복원해줘"
"백업 파일 내보내기 해줘"
```

#### 시스템 상태 및 설정

시스템 상태를 확인하고 설정을 변경할 수 있습니다.

```
"시스템 상태 확인해줘"
"현재 설정 보여줘"
"기본 통화를 달러로 변경해줘"
"자동 분류 기능 켜줘"
```

## 팁과 요령

### 효과적인 질문 방법

- **구체적으로 질문하기**: "지출 보여줘" 보다는 "지난달 식비 지출 보여줘"와 같이 구체적으로 질문하면 더 정확한 답변을 받을 수 있습니다.
- **후속 질문 활용하기**: 이전 질문의 컨텍스트를 유지하며 후속 질문을 할 수 있습니다. 예를 들어, "이번 달 지출 보여줘" 다음에 "그 중에서 가장 큰 금액은 뭐야?"라고 물을 수 있습니다.
- **명확한 날짜 표현 사용하기**: "이번 달", "지난주", "2025년 7월" 등 명확한 날짜 표현을 사용하면 더 정확한 결과를 얻을 수 있습니다.

### 컨텍스트 전환

금융 관련 질문과 일반 질문(캘린더, 날씨 등) 사이에서 컨텍스트를 전환할 수 있습니다.

- 금융 관련 키워드가 있으면 금융 에이전트로 라우팅됩니다.
- 일정, 날씨 등의 키워드가 있으면 일반 에이전트로 라우팅됩니다.
- 이전 대화 컨텍스트가 유지되므로, 명시적인 키워드를 사용하여 컨텍스트를 전환할 수 있습니다.

## 문제 해결

### 일반적인 문제

#### 질문에 대한 응답이 없거나 부정확한 경우

- 질문을 더 구체적으로 다시 작성해보세요.
- 날짜, 카테고리 등의 정보를 명확하게 제공하세요.
- 데이터베이스에 해당 정보가 있는지 확인하세요.

#### 거래 추가가 실패하는 경우

- 날짜 형식이 올바른지 확인하세요 (YYYY-MM-DD).
- 금액이 숫자로 인식될 수 있는지 확인하세요.
- 필수 정보(날짜, 금액, 설명)가 모두 제공되었는지 확인하세요.

#### 분석 결과가 예상과 다른 경우

- 분석 기간이 올바르게 지정되었는지 확인하세요.
- 특정 거래가 분석에서 제외되었는지 확인하세요.
- 분류 규칙이 올바르게 적용되었는지 확인하세요.

### 오류 메시지

#### "데이터베이스 연결 오류"

- 데이터베이스 파일이 존재하는지 확인하세요.
- 데이터베이스 파일에 대한 접근 권한이 있는지 확인하세요.
- 데이터베이스 파일이 손상되었다면 백업에서 복원해보세요.

#### "입력 정보가 올바르지 않습니다"

- 입력한 정보의 형식이 올바른지 확인하세요.
- 날짜 형식은 YYYY-MM-DD 형식을 사용하세요.
- 금액은 숫자로 인식될 수 있게 입력하세요.

#### "요청하신 내용은 안전 정책에 따라 처리할 수 없습니다"

- 민감한 개인 정보나 부적절한 내용이 포함되어 있는지 확인하세요.
- 질문을 다른 방식으로 다시 작성해보세요.

## 스펙 관리 및 기능 개발

### 현재 개발 상태

시스템의 기능 개발 상태는 다음과 같습니다:

- **캘린더 서비스**: IMPLEMENTED (95% 완료) - 구글 캘린더 API 직접 연동 완료
- **금융 거래 관리**: IMPLEMENTED (100% 완료) - 개인 금융 데이터 관리 시스템 완료
- **금융 에이전트 통합**: IN_PROGRESS (60% 완료) - LLM 에이전트 통합 진행 중
- **이메일-캘린더 자동화**: DRAFT (0% 완료) - Gmail 기반 자동 일정 생성 계획 중

### 향후 계획

**이메일-캘린더 자동화 기능**이 다음 주요 개발 목표입니다:
- Gmail 이메일 내용 분석을 통한 자동 일정 생성
- 이메일 처리 규칙 설정 및 관리
- 생성된 일정의 확인 및 수정 기능

자세한 스펙 정보는 `docs/spec_management.md`를 참조하세요.

## 지원 및 피드백

문제가 계속되거나 추가 지원이 필요한 경우, 다음 방법으로 도움을 요청할 수 있습니다:

- 이슈 트래커에 문제 보고하기
- 개발자에게 직접 연락하기
- 사용자 커뮤니티에서 도움 요청하기

피드백과 기능 제안은 언제나 환영합니다. 시스템 개선에 도움이 됩니다.